<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hold-to-Delete DaisyUI Button</title>
    <!-- DaisyUI and Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Anime.js for animations -->
    <script src="https://cdn.jsdelivr.net/npm/animejs@4.1.3/lib/anime.umd.min.js"></script>
    <style>
        /* Using Inter font from Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        html, body {
            height: 100%;
            font-family: 'Inter', sans-serif;
        }
        body {
            /* Prevent text selection while holding the button */
            user-select: none;
            -webkit-user-select: none; /* For Safari */
        }
        /* Custom styles for the button container and fill effect */
        .delete-button {
            /* DaisyUI's .btn class already sets position: relative */
            overflow: hidden; /* Hide the fill element when its width is 0 */
            -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
            transition: transform 0.2s ease; /* Add a smooth transition for the hover scale */
        }
        .delete-button:hover {
            /* We override DaisyUI's hover to only apply a scale effect */
            transform: scale(1.05);
            background-color: transparent !important;
            border-color: #f87272 !important; /* DaisyUI error color */
        }
        .delete-button:active {
            transform: scale(1); /* Briefly shrink when first clicked */
        }
        .button-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0; /* Start with no fill */
            background-color: #dc2626; /* A darker red for the fill, matching DaisyUI's active state */
            z-index: 1;
        }
        .button-text {
            position: relative;
            z-index: 2; /* Ensure text is on top of the fill */
            transition: color 0.3s ease; /* Smooth color transition for text */
        }
        /* When the button is being held, we want the text to be white */
        .delete-button.is-holding .button-text {
            color: white;
        }
    </style>
</head>
<body class="bg-slate-900 flex items-center justify-center" data-theme="dark">

    <!-- The button container using a <button> tag and DaisyUI classes -->
    <button id="deleteButton" class="btn btn-error btn-outline delete-button btn-lg">
        <!-- The fill element that animates on hold -->
        <div class="button-fill"></div>
        <!-- The text for the button -->
        <span class="button-text">Hold for 3s to Delete</span>
    </button>

    <script>
        const { animate } = anime;
        // Get references to the button elements
        const deleteButton = document.getElementById('deleteButton');
        const buttonFill = deleteButton.querySelector('.button-fill');
        const buttonText = deleteButton.querySelector('.button-text');

        // Variables to control the hold mechanism
        let pressTimer = null;
        let fillAnimation = null;

        // Function to start the hold process
        const startHold = function (e) {
            // Prevent default actions
            e.preventDefault();

            // Kill any existing animations to avoid conflicts
            if (fillAnimation) {
                fillAnimation.pause();
            }
            
            // Add a class to manage text color during hold
            deleteButton.classList.add('is-holding');

            // Animate the fill from its current width to 100% over 3 seconds
            fillAnimation = animate(buttonFill, {
                width: '100%', // Animate to full width
                duration: 3000,
                ease: 'linear' // A steady fill
            });

            // Set a timer for 3 seconds to confirm the deletion
            pressTimer = setTimeout(() => {
                confirmDeletion();
            }, 3000);

            buttonText.textContent = "Deleting...";
        };

        // Function to cancel the hold process
        const cancelHold = function () {
            // Clear the timer to prevent deletion
            clearTimeout(pressTimer);
            pressTimer = null;
            
            // Remove the holding class
            deleteButton.classList.remove('is-holding');

            // Kill the forward animation
            if (fillAnimation) {
                fillAnimation.pause();
            }

            // Animate the fill back to 0
            fillAnimation = animate(buttonFill, {
                width: '0%', // Animate back to zero width
                duration: 400, // Make the cancel animation faster
                ease: 'easeOutExpo'
            });
            
            buttonText.textContent = "Hold for 3s to Delete";
        };

        // Function to run the final deletion animation
        const confirmDeletion = () => {
             animate(deleteButton, {
                opacity: 0,
                scale: 0,
                rotate: '90deg',
                duration: 500,
                ease: 'easeInOutExpo',
                onComplete: function(anim) {
                    // Remove the button from the DOM
                    anim.animatables[0].target.remove();
                    console.log('Button removed!');
                }
            });
        };

        // Add event listeners for both mouse and touch events
        deleteButton.addEventListener('mousedown', startHold);
        deleteButton.addEventListener('touchstart', startHold, { passive: true });

        // Add listeners to cancel the hold
        document.addEventListener('mouseup', cancelHold);
        deleteButton.addEventListener('mouseleave', cancelHold);
        document.addEventListener('touchend', cancelHold);

    </script>

</body>
</html>
